extends base

block content
    main.main2
        h1 ASMAUnterhaltMachineObepMalReports
        br
        br
        //-h1= data.malReports
        br
        a.btn.btn--gray(href='#')= `zu den geschlossenen Punkten von ${data.machineName}`
        br
        br
        br
        table#manageASMAUnterhaltMachineOpenMalReportsTable.manageASMAUnterhaltMachineOpenMalReportsTable.table
            thead
                tr
                    th ID
                    th createAt<br>_Mal
                    th user<br>_Mal fN
                    th user_Mal lN
                    th Machine<br>_Mal
                    th Sector<br>_Mal
                    th Component<br>_Mal
                    th Component<br>Detail_Mal
                    th estimated<br>Status
                    th logFal_Repair ID
                    th message<br>Problem<br>_Repair
                    th message<br>Mission<br>_Repair
                    th isElectro<br>Mechanical<br>_Repair
                    th estimated<br>Time<br>_Repair
                    th Status<br>_Repair
                    th user<br>firstName<br>_Repair
                    th user<br>lastName<br>_Repair
                    th repairStatus<br> createdt

                    //-th ff
                    th Edit<br>LogFal

                    //-th ASMAmachinery
                    th statusRun<br>_Mal
                    th status<br>OpenClose<br>_Mal
                    th Edit<br>Mal
            tbody
              each malReport in data.malReports
                  tr
                      td(style="color:red;")= malReport._id
                      td= malReport.createAt_Mal.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })
                      td= malReport.user_Mal.firstName
                      td= malReport.user_Mal.lastName
                      td= malReport.nameMachine_Mal
                      td= malReport.nameSector_Mal
                      td= malReport.nameComponent_Mal
                      td= malReport.nameComponentDetail_Mal
                      td= `${malReport.estimatedStatus}%`
                        //td
                        each logFal_Repair in malReport.logFal_Repair
                            td(style="color:blue;")= logFal_Repair._id
                            td= logFal_Repair.messageProblem_Repair
                            td= logFal_Repair.messageMission_Repair
                            td= logFal_Repair.isElectroMechanical_Repair
                            td= logFal_Repair.estimatedTime_Repair
                            td= `${logFal_Repair.Status_Repair}%`
                            td= logFal_Repair.user_Repair ? logFal_Repair.user_Repair.firstName : 'No user'
                            td= logFal_Repair.user_Repair ? logFal_Repair.user_Repair.lastName : 'No user'
                            td= logFal_Repair.createAt_Repair.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit' })
                            td
                              a(href='#') YY
                      td(style=malReport.statusRun_Mal ? '' : 'background-color: coral')= malReport.statusRun_Mal
                      td= malReport.statusOpenClose_Mal
                      td
                          a(href='#', style="color:red;") xx
                          //-a.edit-button(href=`/api/v1/${data.departmentName}/ASMA/${data.malReports.nameMachine_Mal}`) Edit

        br
