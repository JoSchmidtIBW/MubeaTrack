extends base

block content
    main.main
        h1 Hallo updateASMAMachine hier kann die Maschine zu ASMA gemacht werden
        //-h2= `bin ${data.machine}`
        h1 w√§hle ein SektorASMA aus. entweder die Maschine ansich, oder wenn die Maschine aus weiteren Anlagen besteht. zb Addafer

        br
        h1 MaschinenID:
        h1= data.machine._id
        h1 SektorASMAID:
        h1= data.sectorASMA._id
        h2= data.sectorASMA.name

        //-h1= data.machine.sectorASMA.length
        if(data.sectorASMA.components.length === 0)
            h2(style="color: red" ) Die Anlage hat noch keine Komponenten
            form.form.form-new-componentsASMA-data
                div(class="form__group")
                    input#machineID(class="form__input", type="hidden", value=data.machine._id, readonly, style="background-color: lightgrey;")
                    input#sectorASMAID(class="form__input", type="hidden", value=data.sectorASMA._id, readonly, style="background-color: lightgrey;")
                    label(class="form__label", for="name_de") Name_de ComponentASMA
                    input#input_name_de(class="form__input" type="text" placeholder="Bundlader" required="required")
                    br
                    label(class="form__label", for="name_en") Name_en ComponentASMA
                    input#input_name_en(class="form__input" type="text" placeholder="Bundlader" required="required")
                    br
                    label(class="form__label", for="description_de") Description_de
                    input#input_description_de(class="form__input" type="text" placeholder="Description_de" required="required")
                    br
                    label(class="form__label", for="description_en") Description_en
                    input#input_description_en(class="form__input" type="text" placeholder="Description_en" required="required")
                div(class="form__group")
                    //-button.btn.btn--green.btn--saveCreateComponentsASMAMachine(href=`/api/v1/machinery/createSectorASMAMachine`) Save
                    button.btn.btn--green.btn--saveCreateComponentsASMAMachine(href=`#`) Save
        else
            //-h2= data.machine.sectorASMA.length
        each component in data.sectorASMA.components
            div(class="form__group")
                input#sectorASMAID(class="form__input", type="text", value=data.sectorASMA._id, readonly, style="background-color: lightgrey;")
                input#machineID(class="form__input", type="text", value=data.machine._id, readonly, style="background-color: lightgrey;")
                label(class="form__label", for="name_de") Name_de
                input#name_de(class="form__input", type="text", value=component.name_de, readonly, style="background-color: lightgrey;")
                label(class="form__label", for="name_en") Name_en
                input#name_en(class="form__input", type="text", value=component.name_en, readonly, style="background-color: lightgrey;")
                //-div(class="form__group")
                label(class="form__label", for="description_de") Description_de
                input#description_de(class="form__input", type="text", value=component.description_de, readonly, style="background-color: lightgrey;")
                br
                label(class="form__label", for="description_en") Description_en
                input#description_en(class="form__input", type="text", value=component.description_en, readonly, style="background-color: lightgrey;")
                //-a(href=`/api/v1/manage_updateASMAmachine/${data.machine._id}/sectorASMA/${sector._id}`) edit
                a(href=`/api/v1/createASMAmachine/${data.machine._id}/${data.sectorASMA._id}/updateComponentASMA/${component._id}`) edit
                br
                //-a(style="color:blue") bearbeiten und ComponentDetail
                //-a(href=`/api/v1/createASMAmachine/${data.machine._id}/createComponents/${sector.id}`) Components
                a(href=`/api/v1/createASMAmachine/${data.machine._id}/${data.sectorASMA._id}/createComponentDetails/${component._id}`) ComponentDetails
        button#btn-plus +

        form.form.form-new-componentsASMA-data
            div(class="form__group" id="nameDiv" style="display: none;")
                input#id(class="form__input", type="hidden", value=data.sectorASMA._id, readonly, style="background-color: lightgrey;")
                label(class="form__label", for="name_de") Name_de componentASMA
                input#input_name_de(class="form__input" type="text" placeholder="Bundlader" required="required")
                br
                label(class="form__label", for="name_en") Name_en componentASMA
                input#input_name_en(class="form__input" type="text" placeholder="Bundlader" required="required")
            div(class="form__group" id="description_deDiv" style="display: none;")
                label(class="form__label", for="description_de") Description_de
                input#input_description_de(class="form__input" type="text" placeholder="Description_de" required="required")
                br
                label(class="form__label", for="description_en") Description_en
                input#input_description_en(class="form__input" type="text" placeholder="Description_en" required="required")
            div(class="form__group" id="saveBtnDiv" style="display: none;")
                //-button.btn.btn--green.btn.btn--saveCreateSectorASMAMachine(href=`/api/v1/machinery/createASMAMachine`) Save
                button.btn.btn--green.btn--saveCreateComponentsASMAMachine(href=`#`) Save

        script.
          const btnPlus = document.querySelector('#btn-plus');
          const nameDiv = document.querySelector('#nameDiv');
          const description_deDiv = document.querySelector('#description_deDiv');
          const saveBtnDiv = document.querySelector('#saveBtnDiv')
          btnPlus.addEventListener('click', function() {
            if (nameDiv.style.display === "none") {
              nameDiv.style.display = "block";
              description_deDiv.style.display = "block";
              saveBtnDiv.style.display = "block";
            } else {
              nameDiv.style.display = "none";
              description_deDiv.style.display = "none";
              saveBtnDiv.style.display = "none"
            }
          });




        br
        br
        br
        h1 --------------------------------
        br